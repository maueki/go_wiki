{% extends "navbar.html" %}

{% block title %}{{page.Article.Title}}{% endblock %}

{% block posthead_main %}
<link href="/assets/css/editor.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div id="editor" class="container">
	<form action="/wiki/{{page.Id.Hex()}}" method="POST">
		<!-- title editor -->
		<div class="row">
			<div class="col-xs-12">
				<input type="text" name="title" id="title-editor"
				class="form-control input-lg" value="{{page.Article.Title}}" placeholder="タイトル">
			</div>
		</div><!-- row -->

		<!-- main editor -->
		<div class="row">
			<div class="col-xs-6">
				<textarea name="body" id="body-editor">{{ page.Article.Body|stringformat:"%s" }}</textarea>
			</div>
			<div class="col-xs-6">
				<!-- preview -->
				<div id="output">{{page.Article.Body|markdown|sanitize}}</div>
			</div>
		</div><!-- row -->

		<!-- action btn -->
		<div class="row">
			<div class="col-xs-12">
				{% if isEditor %}
				<input type="submit" class="btn btn-primary pull-right" value="Save">
				{% else %}
				<input type="submit" class="btn btn-primary pull-right"
				data-container="body" disabled="disable" value="Save"
				data-toggle="popover" data-placement="left" data-content="Disable for guest">
				{% endif %}
			</div>
		</div><!-- row -->
	</form>
</div>
{% endblock %}

{% block exscript %}
<script src="/assets/js/editor.js"></script>
<script type="text/javascript">
  $(function () {
    $('[data-toggle="popover"]').popover('show')
  });
</script>
{% endblock %}
